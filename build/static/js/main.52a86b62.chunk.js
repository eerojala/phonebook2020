(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{39:function(e,n,t){"use strict";t.r(n);var a=t(0),c=t(1),r=t(15),o=t.n(r),u=t(3),i=t(4),l=t(5),d=t.n(l),b="/api/entries",s=function(){return d.a.get(b).then((function(e){return e.data}))},j=function(e){return d.a.post(b,e).then((function(e){return e.data}))},h=function(e,n){return d.a.put("".concat(b,"/").concat(e),n).then((function(e){return e.data}))},f=function(e){return d.a.delete("".concat(b,"/").concat(e)).then((function(e){return e.data}))},O=function(e){var n=e.label,t=e.value,c=e.onChange;return Object(a.jsxs)("div",{children:[n," ",Object(a.jsx)("input",{value:t,onChange:c})]})},m=function(e){var n=e.handleNameChange,t=e.name,c=e.handleNumberChange,r=e.number,o=e.handleSubmit;return Object(a.jsx)("div",{children:Object(a.jsxs)("form",{onSubmit:o,children:[Object(a.jsx)(O,{label:"Name",value:t,onChange:n}),Object(a.jsx)(O,{label:"Number",value:r,onChange:c}),Object(a.jsx)("button",{type:"submit",children:"Add"})]})})},v=function(e){var n=e.message,t=e.inlineStyle;return null===n?null:Object(a.jsx)("div",{style:t,children:n})},g=function(e){var n=e.entry,t=e.handleDelete;return Object(a.jsxs)("div",{children:[n.name," ",n.number,Object(a.jsx)("button",{onClick:t,children:"Delete"})]})},x=function(e){var n=e.entries,t=e.handleDelete;return Object(a.jsx)("div",{children:n.map((function(e){return Object(a.jsx)(g,{entry:e,handleDelete:function(){return t(e.id)}},e.id)}))})},p=function(){var e={background:"lightgrey",fontSize:20,borderStyle:"solid",borderRadius:5,padding:10,marginBottom:10},n=Object(i.a)(Object(i.a)({},e),{},{color:"green"}),t=Object(i.a)(Object(i.a)({},e),{},{color:"red"}),r=Object(c.useState)([]),o=Object(u.a)(r,2),l=o[0],d=o[1],b=Object(c.useState)(""),g=Object(u.a)(b,2),p=g[0],y=g[1],w=Object(c.useState)(""),S=Object(u.a)(w,2),C=S[0],k=S[1],D=Object(c.useState)(""),N=Object(u.a)(D,2),A=N[0],E=N[1],B=Object(c.useState)(null),J=Object(u.a)(B,2),L=J[0],T=J[1],z=Object(c.useState)(e),F=Object(u.a)(z,2),I=F[0],P=F[1];Object(c.useEffect)((function(){s().then((function(e){d(e)}))}),[]);var R=function(e){setTimeout((function(){T(null)}),e)},q=function(e){var n=Object(i.a)(Object(i.a)({},e),{},{number:C});console.log(n),h(n.id,n).then((function(e){d(l.map((function(n){return n.id!==e.id?n:e}))),y(""),k("")})).catch((function(e){G(n)}))},G=function(e){T("Entry ".concat(e.name," has already been deleted from the database")),P(t),H(e.id),R(5e3)},H=function(e){d(l.filter((function(n){return n.id!==e})))},K=l.filter((function(e){return e.name.toLowerCase().includes(A.toLowerCase())}));return Object(a.jsxs)("div",{children:[Object(a.jsx)("h2",{children:"Phonebook"}),Object(a.jsx)(v,{message:L,inlineStyle:I}),Object(a.jsx)(O,{label:"Filter shown with",value:A,onChange:function(e){E(e.target.value)}}),Object(a.jsx)("h2",{children:"Add a new entry"}),Object(a.jsx)(m,{handleNameChange:function(e){y(e.target.value)},name:p,handleNumberChange:function(e){k(e.target.value)},number:C,handleSubmit:function(e){e.preventDefault();var a={name:p,number:C},c=l.find((function(e){return e.name===p}));void 0===c?j(a).then((function(e){d(l.concat(e)),T("Added ".concat(p)),P(n),y(""),k(""),R(5e3)})).catch((function(e){console.log(e.response.data),T(e.response.data.error),P(t),R(8e3)})):window.confirm("There already exists an entry with that name. Do you want to update it's number?")&&q(c)}}),Object(a.jsx)("h2",{children:"Numbers"}),Object(a.jsx)(x,{entries:K,handleDelete:function(e){var n=l.find((function(n){return n.id===e}));void 0!==n&&window.confirm("Are you sure yo want to delete ".concat(n.name,"?"))&&f(e).then((function(n){H(e)})).catch((function(e){G(n)}))}})]})};o.a.render(Object(a.jsx)(p,{}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.52a86b62.chunk.js.map